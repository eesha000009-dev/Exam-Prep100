<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduNews Feed - WAEC, JAMB, NECO Updates</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-gray-50 to-blue-100 min-h-screen">

  <div class="max-w-4xl mx-auto py-12 px-4">
    <header class="text-center mb-10">
      <h1 class="text-4xl md:text-5xl font-extrabold text-blue-800">EduNews Feed</h1>
      <p class="mt-2 text-lg text-gray-600">Your daily source for WAEC, JAMB, NECO & University News</p>
    </header>

    <div id="news-feed-list" class="space-y-6">
      <!-- Welcome Message -->
      <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-6 flex items-center gap-4 border border-blue-200">
        <svg class="w-8 h-8 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7v4a2 2 0 01-2 2H7a2 2 0 01-2-2V7m14 0a2 2 0 00-2-2H7a2 2 0 00-2 2m14 0V5a2 2 0 00-2-2H7a2 2 0 00-2 2v2m14 0H5"></path></svg>
        <div>
          <h2 class="font-bold text-xl text-blue-800 mb-1">Welcome to your News Feed!</h2>
          <p class="text-blue-600">Stay updated with the latest announcements and information from top educational sources.</p>
        </div>
      </div>
      
      <!-- Loading State -->
      <div id="news-loading" class="text-center text-blue-600 py-8 flex items-center justify-center gap-3">
        <svg class="animate-spin h-6 w-6 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span>Fetching latest educational news...</span>
      </div>
    </div>
  </div>

  <footer class="text-center py-6 mt-8 text-gray-500 text-sm">
    <p>EduNews Feed | Powered by Public RSS Feeds</p>
  </footer>

<script>
  // --- CONFIGURATION ---
  // Add or remove RSS feed URLs here from your favorite educational news sites.
  // Make sure the site has a valid RSS feed.
  const rssFeeds = [
    'https://www.myschoolgist.com/ng/feed/',
    'https://schoolnewsng.com/feed/'
    // You can add more RSS feed URLs here
  ];

  // --- UTILITY FUNCTION ---
  // This function cleans HTML tags from the description text from RSS feeds.
  function cleanHTML(htmlString) {
    const parser = new DOMParser();
    const doc = parser.parseFromString(htmlString, 'text/html');
    let text = doc.body.textContent || "";
    // Limit description to ~200 characters for a neat summary
    if (text.length > 200) {
      text = text.substring(0, 200).trim() + '...';
    }
    return text;
  }

  // --- CORE FUNCTION ---
  async function fetchAllNews() {
    const newsContainer = document.getElementById('news-feed-list');
    const loadingIndicator = document.getElementById('news-loading');
    const allNewsItems = [];

    // Use a service to convert RSS to JSON
    const rssToJsonService = 'https://api.rss2json.com/v1/api.json?rss_url=';

    // Create a fetch promise for each RSS feed
    const fetchPromises = rssFeeds.map(feedUrl => 
      fetch(`${rssToJsonService}${encodeURIComponent(feedUrl)}`)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Failed to fetch feed: ${feedUrl}`);
          }
          return res.json();
        })
        .then(data => {
          if (data.items) {
            // Add the source name to each item
            data.items.forEach(item => {
              item.source = data.feed.title;
            });
            return data.items;
          }
          return [];
        })
        .catch(error => {
          console.error(error);
          return []; // Return empty array on error to not break the whole page
        })
    );

    try {
      // Wait for all fetch requests to complete
      const results = await Promise.all(fetchPromises);
      
      // Flatten the array of arrays into a single news array
      const combinedNews = results.flat();

      // Sort all news items by publication date, newest first
      combinedNews.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

      // Remove loading indicator
      loadingIndicator.remove();

      if (combinedNews.length === 0) {
        newsContainer.innerHTML += `<div class="bg-yellow-100 text-yellow-800 rounded-lg p-4 text-center">Could not fetch news at this time. Please check your connection or try again later.</div>`;
        return;
      }

      // Display each news item
      combinedNews.forEach(item => {
        const newsCard = document.createElement('div');
        newsCard.className = 'bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6 transform transition hover:scale-[1.02] duration-300';
        
        const formattedDate = new Date(item.pubDate).toLocaleDateString('en-US', {
          year: 'numeric', month: 'long', day: 'numeric'
        });

        newsCard.innerHTML = `
          <article class="space-y-3">
            <h2 class="font-bold text-xl text-blue-800 hover:text-blue-600">
              <a href="${item.link}" target="_blank" rel="noopener noreferrer">${item.title}</a>
            </h2>
            <p class="text-gray-600 text-base leading-relaxed">${cleanHTML(item.description)}</p>
            <div class="flex flex-wrap justify-between items-center gap-4 pt-3 border-t border-gray-200">
              <div class="text-sm text-gray-500">
                <span>Source: <strong>${item.source}</strong></span>
                <span class="mx-2">|</span>
                <span>${formattedDate}</span>
              </div>
              <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-600 text-white font-semibold px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors">
                Read More &rarr;
              </a>
            </div>
          </article>
        `;
        newsContainer.appendChild(newsCard);
      });

    } catch (error) {
      console.error('Error fetching news feeds:', error);
      loadingIndicator.textContent = 'Failed to load news. Please try again later.';
      loadingIndicator.className = 'text-center text-red-500 py-8';
    }
  }

  // Run the function when the page loads
  document.addEventListener('DOMContentLoaded', fetchAllNews);
</script>

</body>
</html>